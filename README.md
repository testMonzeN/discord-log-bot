# 🤖 Discord Log Bot v2.0.0 - Модульная версия

Система логирования событий Discord сервера с современной модульной архитектурой и расширенной системой аналитики.

## 🏗️ Архитектура проекта

```
discord-log-bot/
├── 📁 bot/                    # Основной пакет бота
│   ├── 📁 config/             # Управление настройками
│   │   ├── __init__.py
│   │   └── config_manager.py  # ConfigManager класс
│   │
│   ├── 📁 events/             # Обработчики событий
│   │   ├── __init__.py
│   │   ├── base_event_handler.py  # Базовый класс
│   │   ├── invite_events.py       # События приглашений
│   │   ├── voice_events.py        # Голосовые события
│   │   ├── message_events.py      # События сообщений
│   │   ├── member_events.py       # События участников
│   │   ├── channel_events.py      # События каналов
│   │   └── role_events.py         # События ролей
│   │
│   ├── 📁 ui/                 # Пользовательский интерфейс
│   │   ├── __init__.py
│   │   ├── log_buttons.py         # Интерактивные кнопки
│   │   ├── log_buttons_methods.py # Дополнительные методы
│   │   └── modals.py              # Модальные окна
│   │
│   ├── 📁 commands/           # Команды бота
│   │   ├── __init__.py
│   │   ├── log_commands.py        # Команды логов
│   │   ├── toggle_commands.py     # Команды функций
│   │   ├── utility_commands.py    # Служебные команды
│   │   └── stats_commands.py      # Команды аналитики (!stats, !restore_analytics)
│   │
│   ├── 📁 utils/              # Вспомогательные функции
│   │   ├── __init__.py
│   │   ├── helpers.py             # Общие функции
│   │   └── backup.py              # Резервное копирование
│   │
│   └── __init__.py            # Инициализация пакета
│
├── 📄 main_new.py             # Новый модульный главный файл
├── 📄 main.py                 # Старый монолитный файл (для сравнения)
├── 📄 bot_settings.json       # Настройки бота
├── 📄 analytics.json          # Файл аналитики
├── 📁 backups/                # Папка резервных копий аналитики
├── 📄 requirements.txt        # Зависимости
└── 📄 README.md               # Документация
```

## 🚀 Запуск модульной версии

```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск нового модульного бота
python main_new.py
```

## 🆚 Сравнение версий

| Характеристика    | Старая версия     | Новая версия         |
|-------------------|-------------------|----------------------|
| **Архитектура**   | Монолитная        | Модульная            |
| **Размер файла**  | ~1300 строк       | ~150 строк           |
| **Организация**   | Все в одном файле | Разделено по модулям |
| **Расширяемость** | Сложно            | Легко                |
| **Тестирование**  | Затруднено        | Простое              |
| **Поддержка**     | Сложная           | Удобная              |

## 📦 Ключевые модули

### 🔧 ConfigManager
- **Файл**: `bot/config/config_manager.py`
- **Назначение**: Управление настройками JSON
- **Методы**: Чтение/запись настроек, управление серверами

### 🎛️ Event Handlers
- **Папка**: `bot/events/`
- **Назначение**: Обработка различных событий Discord
- **Классы**: InviteEventHandler, VoiceEventHandler, и др.

### 💬 Commands
- **Папка**: `bot/commands/`
- **Назначение**: Команды бота как Cog'и
- **Классы**: LogCommands, ToggleCommands, UtilityCommands, **StatsCommands**

### 📊 Stats & Analytics
- **Файл**: `bot/commands/stats_commands.py`
- **Назначение**: Система аналитики (!stats)
- **Возможности**: Статистика по ролям, пользователям, сообщениям, каналам, инвайтам, банам, мьютам и др.
- **Всё выводится красивыми Embed-сообщениями**

### 💾 Backup System
- **Файл**: `bot/utils/backup.py`
- **Назначение**: Автоматическое резервное копирование analytics.json
- **Папка**: `backups/` — все резервные копии
- **Команда восстановления**: `!restore_analytics [имя_файла]` или `!restore_analytics list`

### 🎨 UI Components
- **Папка**: `bot/ui/`
- **Назначение**: Интерактивные элементы
- **Классы**: LogButtons, ClearLogsModal

## 🎯 Преимущества модульной архитектуры

### ✅ Читаемость
- Каждый модуль отвечает за свою область
- Легко найти нужный код
- Понятная структура проекта

### ✅ Масштабируемость
- Простое добавление новых функций
- Независимые модули
- Легкое тестирование отдельных частей

### ✅ Поддержка
- Изменения в одном модуле не затрагивают другие
- Простая отладка
- Удобное командное разработка

### ✅ Переиспользование
- Модули можно использовать в других проектах
- Базовые классы для расширения
- Стандартизированные интерфейсы

## 🔄 Миграция с старой версии

1. **Настройки сохранены** - `bot_settings.json` совместим
2. **Команды те же** - все старые команды работают
3. **Функционал идентичен** - без потери возможностей
4. **Улучшенная производительность** - оптимизированный код

## 📋 Доступные команды

### 📝 Настройка логов
- `!setlog-new` - Интерактивная панель настройки
- `!setlog-old` - Старая команда настройки
- `!quicklog [#канал]` - Быстрая настройка всех функций

### ⚙️ Управление функциями
- `!toggle [функция]` - Включить/выключить функцию
- `!toggle list` - Список всех функций
- `!toggle on/off` - Включить/выключить все

### 💬 Служебные команды
- `!reload` - Перезагрузка настроек

### 📊 Аналитика и резервное копирование
- `!stats <тип>` — статистика по ролям, пользователям, сообщениям, каналам, инвайтам, банам, мьютам и др.
- `!restore_analytics [имя_файла]` — восстановить analytics.json из резервной копии
- `!restore_analytics list` — список всех резервных копий

## 🎨 Отслеживаемые события

- 🎫 **События приглашений** - создание, использование
- 🎧 **Голосовая активность** - вход/выход, микрофон
- 💬 **События сообщений** - удаление, редактирование
- 🎨 **События ролей** - создание/удаление ролей
- 📁 **События каналов** - создание/удаление каналов
- 🔨 **События банов** - баны и разбаны
- 🔇 **События мутов** - тайм-ауты
- 🎖️ **Управление ролями** - выдача/снятие ролей

## 🔒 Безопасность и хранение данных
- Все json-файлы (`bot_settings.json`, `analytics.json`) хранятся в корне проекта
- Все резервные копии — в папке `backups/`
- Секреты (токен) только через переменные окружения

## 🔮 Будущие улучшения

- 📊 Расширенная система аналитики
- 🔔 Уведомления в реальном времени
- 🎭 Система фильтров
- 📈 Статистика событий
- 🌐 Web-интерфейс
- 🔄 Автоматическое резервное копирование


## **🌟 Примечание 🌟**
### 🐛 **Нашли баг? Есть предложения?**

```bash
🔍 Обнаружили ошибку?
💭 Есть идея для улучшения?
🚀 Хотите новую функцию?
```

- Telegram: @KaradevFaceKid
- vk: vk.com/GospodinMonzeN
- Discord: karadevfacekid

---
**Разработано с ❤️ для Discord сообществ** 